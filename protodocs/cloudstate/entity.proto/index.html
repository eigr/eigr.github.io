<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-protodocs docs-doc-id-cloudstate/entity.proto">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="eigr.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="eigr.io Atom Feed"><title data-rh="true">entity.proto | eigr.io</title><meta data-rh="true" property="og:image" content="https://eigr.io/icon/eigr_flat.svg"><meta data-rh="true" name="twitter:image" content="https://eigr.io/icon/eigr_flat.svg"><meta data-rh="true" property="og:url" content="https://eigr.io/protodocs/cloudstate/entity.proto/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:title" content="eigr.io – A Serverless Runtime on the BEAM"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-protodocs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-protodocs-current"><meta data-rh="true" property="og:title" content="entity.proto | eigr.io"><meta data-rh="true" name="description" content="entity.proto"><meta data-rh="true" property="og:description" content="entity.proto"><link data-rh="true" rel="icon" href="/icon/favicon.ico?v=2"><link data-rh="true" rel="canonical" href="https://eigr.io/protodocs/cloudstate/entity.proto/"><link data-rh="true" rel="alternate" href="https://eigr.io/protodocs/cloudstate/entity.proto/" hreflang="en"><link data-rh="true" rel="alternate" href="https://eigr.io/protodocs/cloudstate/entity.proto/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.af466c18.css">
<link rel="preload" href="/assets/js/runtime~main.b96bf770.js" as="script">
<link rel="preload" href="/assets/js/main.a7fbfefb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sc_logo_002_1.png" alt="eigr" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sc_logo_002_1.png" alt="eigr" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/overview/">Documentation</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/protodocs/cloudstate/entity.proto/">gRPC Proxy-Protocol</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eigr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/protodocs/cloudstate/entity_key.proto/">Proxy-Protocol v0.6.0</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/protodocs/cloudstate/entity_key.proto/">/cloudstate</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/entity_key.proto/">entity_key.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/eventing.proto/">eventing.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/legacy_entity_key.proto/">legacy_entity_key.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/action.proto/">action.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/crdt.proto/">crdt.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/protodocs/cloudstate/entity.proto/">entity.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/event_sourced.proto/">event_sourced.proto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/protodocs/cloudstate/value_entity.proto/">value_entity.proto</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/protodocs/google/api/annotations.proto/">/google/api</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Proxy-Protocol v0.6.0</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">/cloudstate</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">entity.proto</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="entityproto"><code>entity.proto</code><a class="hash-link" href="#entityproto" title="Direct link to heading">​</a></h2><p><em><strong>path</strong> cloudstate/entity.proto</em></p><p><em><strong>package</strong> cloudstate</em></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="messages">Messages<a class="hash-link" href="#messages" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clientaction"><code>ClientAction</code><a class="hash-link" href="#clientaction" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">An action for the client</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>reply</code></td><td><a href="/protodocs/cloudstate/entity.proto/#reply"><code>Reply</code></a></td><td style="white-space:pre-wrap">Send a reply</td></tr><tr><td><code>forward</code></td><td><a href="/protodocs/cloudstate/entity.proto/#forward"><code>Forward</code></a></td><td style="white-space:pre-wrap">Forward to another entity</td></tr><tr><td><code>failure</code></td><td><a href="/protodocs/cloudstate/entity.proto/#failure"><code>Failure</code></a></td><td style="white-space:pre-wrap">Send a failure to the client</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="command"><code>Command</code><a class="hash-link" href="#command" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A command. For each command received, a reply must be sent with a matching command id.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entity_id</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The ID of the entity.</td></tr><tr><td><code>id</code></td><td><code>int64</code></td><td style="white-space:pre-wrap">A command id.</td></tr><tr><td><code>name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">Command name</td></tr><tr><td><code>payload</code></td><td><code>google.protobuf.Any</code></td><td style="white-space:pre-wrap">The command payload.</td></tr><tr><td><code>streamed</code></td><td><code>bool</code></td><td style="white-space:pre-wrap">Whether the command is streamed or not.</td></tr><tr><td><code>metadata</code></td><td><a href="/protodocs/cloudstate/entity.proto/#metadata"><code>Metadata</code></a></td><td style="white-space:pre-wrap">The command metadata.

Not all transports support per message metadata, for example, gRPC doesn&#x27;t. The Cloudstate proxy MAY include
metadata from other locations in this case, for example, in gRPC, a unary call MAY have the HTTP request headers
attached to the command, while a streamed call MAY have the HTTP request headers attached as the metadata for
either the first command, or every command. This specification leaves this behavior undefined.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entity"><code>Entity</code><a class="hash-link" href="#entity" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap"></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entity_type</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The type of entity. By convention, this should be a fully qualified entity protocol grpc
service name, for example, cloudstate.eventsourced.EventSourced.</td></tr><tr><td><code>service_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the service to load from the protobuf file.</td></tr><tr><td><code>persistence_id</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The ID to namespace state by. How this is used depends on the type of entity, for example,
event sourced entities will prefix this to the persistence id.</td></tr><tr><td><code>passivation_strategy</code></td><td><a href="/protodocs/cloudstate/entity.proto/#entitypassivationstrategy"><code>EntityPassivationStrategy</code></a></td><td style="white-space:pre-wrap">The passivation strategy for the entity.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entitypassivationstrategy"><code>EntityPassivationStrategy</code><a class="hash-link" href="#entitypassivationstrategy" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">The semantics is to provide a flexible way for entity user functions to configure the passivation strategy.
This strategy is sent to the proxy at discovery time allowing the proxy to configure the corresponding entities.
The only passivation strategy supported is the timeout strategy and configuring this is optional for the entity.
If an entity user function does not configure the passivation strategy the proxy uses its fallback default value.

The passivation strategy for the entity user function.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>timeout</code></td><td><a href="/protodocs/cloudstate/entity.proto/#timeoutpassivationstrategy"><code>TimeoutPassivationStrategy</code></a></td><td style="white-space:pre-wrap">the timeout passivation strategy.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entityspec"><code>EntitySpec</code><a class="hash-link" href="#entityspec" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap"></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>proto</code></td><td><code>bytes</code></td><td style="white-space:pre-wrap">This should be the Descriptors.FileDescriptorSet in proto serialized from as generated by:
protoc --include_imports \
--proto_path=&lt;proto file directory&gt; \
--descriptor_set_out=user-function.desc \
&lt;path to .proto files&gt;</td></tr><tr><td><code>entities</code></td><td><a href="/protodocs/cloudstate/entity.proto/#entity"><code>Entity</code></a></td><td style="white-space:pre-wrap">The entities being served.</td></tr><tr><td><code>service_info</code></td><td><a href="/protodocs/cloudstate/entity.proto/#serviceinfo"><code>ServiceInfo</code></a></td><td style="white-space:pre-wrap">Optional information about the service.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="failure"><code>Failure</code><a class="hash-link" href="#failure" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A failure reply. If this is returned, it will be translated into a gRPC unknown
error with the corresponding description if supplied.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>command_id</code></td><td><code>int64</code></td><td style="white-space:pre-wrap">The id of the command being replied to. Must match the input command.</td></tr><tr><td><code>description</code></td><td><code>string</code></td><td style="white-space:pre-wrap">A description of the error.</td></tr><tr><td><code>restart</code></td><td><code>bool</code></td><td style="white-space:pre-wrap">Whether this failure should trigger an entity restart.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="forward"><code>Forward</code><a class="hash-link" href="#forward" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">Forwards handling of this request to another entity.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>service_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the service to forward to.</td></tr><tr><td><code>command_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the command.</td></tr><tr><td><code>payload</code></td><td><code>google.protobuf.Any</code></td><td style="white-space:pre-wrap">The payload.</td></tr><tr><td><code>metadata</code></td><td><a href="/protodocs/cloudstate/entity.proto/#metadata"><code>Metadata</code></a></td><td style="white-space:pre-wrap">The metadata to include with the forward</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metadata"><code>Metadata</code><a class="hash-link" href="#metadata" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">Transport-specific metadata associated with a message.

The semantics of the metadata are not defined in this protocol, but rather, depend on the transport on which a
particular instance of the metadata maps to. What keys or values are allowed or disallowed, whether duplicate values
for the same key are allowed and how they are handled, and whether key names are case sensitive or not, are all
undefined in the context of the Cloudstate protocol.

If a metadata entry associated with a message can&#x27;t be expressed in an underlying transport, for example, due to
invalid characters in a key or value, the behavior of the proxy is undefined. This is because metadata is transport
specific, so if the user function chooses to use metadata, it is choosing to be specific to a particular transport,
which is beyond the scope of the Cloudstate protocol, and it&#x27;s therefore the user function&#x27;s responsibility to adhere
to the semantics of that transport. The proxy MAY decide to drop metadata entries if it knows they are invalid or
unsupported. If a metadata entry is dropped, the proxy MAY inform the user function that the entry was dropped by
sending an error message to the EntityDiscovery.ReportError gRPC call.

The metadata MAY also contain CloudEvent metadata. If a message comes from a Cloudstate event source, the Cloudstate
proxy MUST attach CloudEvent metadata to it if the event doesn&#x27;t already have CloudEvent metadata attached to it.
This metadata SHALL be encoded according to the binary mode of the CloudEvent HTTP protocol binding, which can be
found here:

https://github.com/cloudevents/spec/blob/master/http-protocol-binding.md

The Cloudstate proxy MAY synthesize appropriate values for Cloudstate metadata if no equivalent metadata exists in
the event source, for example, if there is no type, the Cloudstate proxy MAY use the name of the gRPC message as the
CloudEvent type, and if there is no source, the Cloudstate proxy MAY use the name of the topic as the source.

If an incoming message does have CloudEvent metadata attached to it, the Cloudstate proxy MUST transcode that
CloudEvent metadata to the HTTP protocol binding as described above.

Messages sent from the user function to an event destination MAY include CloudEvent metadata. If they include any
CloudEvent metadata, they MUST include all required CloudEvent attributes, including id, source, specversion and
type. The behavior of the proxy is undefined if some of these attributes, but not others, are included - the proxy
MAY ignore them all, or MAY generate values itself, but SHOULD NOT fail sending the message. If the destination for
the message is an event destination, the Cloudstate proxy MUST transcode the supplied Cloudstate metadata to a
binding appropriate for the underlying transport for that event destination, it MUST NOT pass the CloudEvent
metadata as is unless the transport uses the same binding rules.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entries</code></td><td><a href="/protodocs/cloudstate/entity.proto/#metadataentry"><code>MetadataEntry</code></a></td><td style="white-space:pre-wrap">The metadata entries.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metadataentry"><code>MetadataEntry</code><a class="hash-link" href="#metadataentry" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A metadata entry.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>key</code></td><td><code>string</code></td><td style="white-space:pre-wrap">Key for the entry. Valid keys depend on the transport from or to which this metadata is sent.</td></tr><tr><td><code>string_value</code></td><td><code>string</code></td><td style="white-space:pre-wrap">A string value. Valid values depend on the transport from or which this metadata is sent.

If the transport does not support string values, the behavior of the Cloudstate proxy is undefined from the
point of view of this protocol. If there is a convention in the protocol for encoding string values as
UTF-8 bytes, then the Cloudstate proxy MAY do that.</td></tr><tr><td><code>bytes_value</code></td><td><code>bytes</code></td><td style="white-space:pre-wrap">A bytes value. Valid values depend on the transport from or which this metadata is sent.

If the transport does not support bytes values, the behavior of the Cloudstate proxy is undefined from the
point of view of this protocol. If there is a convention in the protocol for encoding bytes values as
Base64 encoded strings, then the Cloudstate proxy MAY do that.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxyinfo"><code>ProxyInfo</code><a class="hash-link" href="#proxyinfo" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap"></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>protocol_major_version</code></td><td><code>int32</code></td><td style="white-space:pre-wrap"></td></tr><tr><td><code>protocol_minor_version</code></td><td><code>int32</code></td><td style="white-space:pre-wrap"></td></tr><tr><td><code>proxy_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap"></td></tr><tr><td><code>proxy_version</code></td><td><code>string</code></td><td style="white-space:pre-wrap"></td></tr><tr><td><code>supported_entity_types</code></td><td><code>string</code></td><td style="white-space:pre-wrap"></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reply"><code>Reply</code><a class="hash-link" href="#reply" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A reply to the sender.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>payload</code></td><td><code>google.protobuf.Any</code></td><td style="white-space:pre-wrap">The reply payload</td></tr><tr><td><code>metadata</code></td><td><a href="/protodocs/cloudstate/entity.proto/#metadata"><code>Metadata</code></a></td><td style="white-space:pre-wrap">Metadata for the reply

Not all transports support per message metadata, for example, gRPC doesn&#x27;t. The Cloudstate proxy MAY ignore the
metadata in this case, or it MAY lift the metadata into another place, for example, in gRPC, a unary call MAY
have its reply metadata placed in the headers of the HTTP response, or the first reply to a streamed call MAY
have its metadata placed in the headers of the HTTP response.

If the metadata is ignored, the Cloudstate proxy MAY notify the user function by sending an error message to the
EntityDiscovery.ReportError gRPC call.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="serviceinfo"><code>ServiceInfo</code><a class="hash-link" href="#serviceinfo" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">Information about the service that proxy is proxying to.
All of the information in here is optional. It may be useful for debug purposes.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>service_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the service, eg, &quot;shopping-cart&quot;.</td></tr><tr><td><code>service_version</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The version of the service.</td></tr><tr><td><code>service_runtime</code></td><td><code>string</code></td><td style="white-space:pre-wrap">A description of the runtime for the service. Can be anything, but examples might be:
- node v10.15.2
- OpenJDK Runtime Environment 1.8.0_192-b12</td></tr><tr><td><code>support_library_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">If using a support library, the name of that library, eg &quot;cloudstate&quot;</td></tr><tr><td><code>support_library_version</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The version of the support library being used.</td></tr><tr><td><code>protocol_major_version</code></td><td><code>int32</code></td><td style="white-space:pre-wrap">Cloudstate protocol major version accepted by the support library.</td></tr><tr><td><code>protocol_minor_version</code></td><td><code>int32</code></td><td style="white-space:pre-wrap">Cloudstate protocol minor version accepted by the support library.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sideeffect"><code>SideEffect</code><a class="hash-link" href="#sideeffect" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A side effect to be done after this command is handled.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>service_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the service to perform the side effect on.</td></tr><tr><td><code>command_name</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The name of the command.</td></tr><tr><td><code>payload</code></td><td><code>google.protobuf.Any</code></td><td style="white-space:pre-wrap">The payload of the command.</td></tr><tr><td><code>synchronous</code></td><td><code>bool</code></td><td style="white-space:pre-wrap">Whether this side effect should be performed synchronously, ie, before the reply is eventually
sent, or not.</td></tr><tr><td><code>metadata</code></td><td><a href="/protodocs/cloudstate/entity.proto/#metadata"><code>Metadata</code></a></td><td style="white-space:pre-wrap">The metadata to include with the side effect</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streamcancelled"><code>StreamCancelled</code><a class="hash-link" href="#streamcancelled" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap"></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entity_id</code></td><td><code>string</code></td><td style="white-space:pre-wrap">The ID of the entity</td></tr><tr><td><code>id</code></td><td><code>int64</code></td><td style="white-space:pre-wrap">The command id</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timeoutpassivationstrategy"><code>TimeoutPassivationStrategy</code><a class="hash-link" href="#timeoutpassivationstrategy" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap">A passivation strategy based on a timeout. The idle timeout after which a user function&#x27;s entity is passivated.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>timeout</code></td><td><code>int64</code></td><td style="white-space:pre-wrap">The timeout in millis</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="userfunctionerror"><code>UserFunctionError</code><a class="hash-link" href="#userfunctionerror" title="Direct link to heading">​</a></h3><p style="white-space:pre-wrap"></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>message</code></td><td><code>string</code></td><td style="white-space:pre-wrap"></td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="services">Services<a class="hash-link" href="#services" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entitydiscovery"><code>EntityDiscovery</code><a class="hash-link" href="#entitydiscovery" title="Direct link to heading">​</a></h3><p>Entity discovery service.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="discover"><code>discover</code><a class="hash-link" href="#discover" title="Direct link to heading">​</a></h4><table><tbody><tr><th style="text-align:left">Method</th><td><code>discover</code></td></tr><tr><th style="text-align:left">Request</th><td><a href="/protodocs/cloudstate/entity.proto/#proxyinfo"><code>ProxyInfo</code></a></td></tr><tr><th style="text-align:left">Response</th><td><a href="/protodocs/cloudstate/entity.proto/#entityspec"><code>EntitySpec</code></a></td></tr><tr><th style="text-align:left">Description</th><td>Discover what entities the user function wishes to serve.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reporterror"><code>reportError</code><a class="hash-link" href="#reporterror" title="Direct link to heading">​</a></h4><table><tbody><tr><th style="text-align:left">Method</th><td><code>reportError</code></td></tr><tr><th style="text-align:left">Request</th><td><a href="/protodocs/cloudstate/entity.proto/#userfunctionerror"><code>UserFunctionError</code></a></td></tr><tr><th style="text-align:left">Response</th><td><a><code>Empty</code></a></td></tr><tr><th style="text-align:left">Description</th><td>Report an error back to the user function. This will only be invoked to tell the user function
that it has done something wrong, eg, violated the protocol, tried to use an entity type that
isn&#x27;t supported, or attempted to forward to an entity that doesn&#x27;t exist, etc. These messages
should be logged clearly for debugging purposes.</td></tr></tbody></table><hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/protodocs/cloudstate/crdt.proto/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">crdt.proto</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/protodocs/cloudstate/event_sourced.proto/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">event_sourced.proto</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#entityproto" class="table-of-contents__link toc-highlight"><code>entity.proto</code></a></li><li><a href="#messages" class="table-of-contents__link toc-highlight">Messages</a><ul><li><a href="#clientaction" class="table-of-contents__link toc-highlight"><code>ClientAction</code></a></li><li><a href="#command" class="table-of-contents__link toc-highlight"><code>Command</code></a></li><li><a href="#entity" class="table-of-contents__link toc-highlight"><code>Entity</code></a></li><li><a href="#entitypassivationstrategy" class="table-of-contents__link toc-highlight"><code>EntityPassivationStrategy</code></a></li><li><a href="#entityspec" class="table-of-contents__link toc-highlight"><code>EntitySpec</code></a></li><li><a href="#failure" class="table-of-contents__link toc-highlight"><code>Failure</code></a></li><li><a href="#forward" class="table-of-contents__link toc-highlight"><code>Forward</code></a></li><li><a href="#metadata" class="table-of-contents__link toc-highlight"><code>Metadata</code></a></li><li><a href="#metadataentry" class="table-of-contents__link toc-highlight"><code>MetadataEntry</code></a></li><li><a href="#proxyinfo" class="table-of-contents__link toc-highlight"><code>ProxyInfo</code></a></li><li><a href="#reply" class="table-of-contents__link toc-highlight"><code>Reply</code></a></li><li><a href="#serviceinfo" class="table-of-contents__link toc-highlight"><code>ServiceInfo</code></a></li><li><a href="#sideeffect" class="table-of-contents__link toc-highlight"><code>SideEffect</code></a></li><li><a href="#streamcancelled" class="table-of-contents__link toc-highlight"><code>StreamCancelled</code></a></li><li><a href="#timeoutpassivationstrategy" class="table-of-contents__link toc-highlight"><code>TimeoutPassivationStrategy</code></a></li><li><a href="#userfunctionerror" class="table-of-contents__link toc-highlight"><code>UserFunctionError</code></a></li></ul></li><li><a href="#services" class="table-of-contents__link toc-highlight">Services</a><ul><li><a href="#entitydiscovery" class="table-of-contents__link toc-highlight"><code>EntityDiscovery</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/Y55eZpyvNs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/eigr_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/eigr" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 – eigr.io | graphics design by <a href="https://ursulahitz.com">ursulahitz.com</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.b96bf770.js"></script>
<script src="/assets/js/main.a7fbfefb.js"></script>
</body>
</html>